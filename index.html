<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TransMiApp - Sistema de Transporte</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="style.css">

  
</head>
<body>
    <!-- Pantalla de Inicio -->
    <div id="home-screen" class="screen active">
      <header class="main-header">
  <div class="bus-animation">
    <div class="bus">üöå</div>
  </div>
  <div class="header-text">
    <h1>App de Transporte</h1>
    <p>Sistema de Transporte P√∫blico</p>
  </div>
</header>

        
        <div class="balance-card">
            <p>Tu Saldo Disponible</p>
            <h2 id="user-balance">$10,000 COP</h2>
        </div>
        
        <div class="menu-grid">
            <button class="menu-btn" onclick="showScreen('map-screen')">
                <span class="icon">üó∫Ô∏è</span>
                <span>Ver Mapa</span>
            </button>
            <button class="menu-btn" onclick="showScreen('scanner-screen')">
                <span class="icon">üì∑</span>
                <span>Escanear QR</span>
            </button>
            <button class="menu-btn" onclick="showScreen('history-screen')">
                <span class="icon">üìã</span>
                <span>Historial</span>
            </button>
            <button class="menu-btn" onclick="showScreen('recharge-screen')">
                <span class="icon">üí≥</span>
                <span>Recargar</span>
            </button>
        </div>
    </div>

    <!-- Pantalla del Mapa -->
    <div id="map-screen" class="screen">
        <div class="screen-header">
            <button onclick="showScreen('home-screen')" class="back-btn">‚Üê Volver</button>
            <h2>Buses en Tiempo Real</h2>
        </div>
        
        <div class="map-controls">
            <select id="route-filter" onchange="filterRoute()">
                <option value="all">Todas las Rutas</option>
                <option value="ruta-1">Ruta 1 - Centro</option>
                <option value="ruta-2">Ruta 2 - Norte</option>
                <option value="ruta-3">Ruta 3 - Sur</option>
            </select>
        </div>
        
        <div id="map"></div>
        
        <div class="bus-info-panel">
            <h3>Buses Activos: <span id="active-buses">0</span></h3>
        </div>
    </div>

    <!-- Pantalla del Scanner QR -->
    <div id="scanner-screen" class="screen">
        <div class="screen-header">
            <button onclick="showScreen('home-screen')" class="back-btn">‚Üê Volver</button>
            <h2>Escanear C√≥digo QR</h2>
        </div>
        
        <div class="scanner-container">
            <div id="qr-reader"></div>
            
            <div class="scanner-instructions">
                <p>Permite acceso a la c√°mara para escanear</p>
                <p>Apunta al c√≥digo QR del bus</p>
            </div>
            
            <!-- Para pruebas: Generar QR de prueba -->
            <div class="demo-section">
                <h3>Qr de prueba</h3>
                <p>Escanea estos c√≥digos QR de prueba:</p>
                
   <div class="qr-codes-grid">
   
    <div class="qr-code-item">
        <div id="qr-bus-3"></div>
        <p>Bus 308 - Sur</p>
    </div>
</div>
            </div>
        </div>
    </div>

    <!-- Pantalla de Pago -->
    <div id="payment-screen" class="screen">
        <div class="screen-header">
            <button onclick="showScreen('scanner-screen')" class="back-btn">‚Üê Volver</button>
            <h2>Confirmar Pago</h2>
        </div>
        
        <div class="payment-container">
            <div class="bus-details">
                <h3>Informaci√≥n del Viaje</h3>
                <div class="detail-row">
                    <span>Bus:</span>
                    <strong id="payment-bus-number"></strong>
                </div>
                <div class="detail-row">
                    <span>Ruta:</span>
                    <strong id="payment-route"></strong>
                </div>
                <div class="detail-row">
                    <span>Tarifa:</span>
                    <strong id="payment-fare" class="fare-amount"></strong>
                </div>
            </div>
            
            <div class="balance-info">
                <p>Tu saldo actual</p>
                <h2 id="payment-balance">$10,000</h2>
            </div>
            
            <button class="btn-primary" onclick="processPayment()">
                Confirmar Pago
            </button>
        </div>
    </div>

    <!-- Pantalla de Historial -->
    <div id="history-screen" class="screen">
        <div class="screen-header">
            <button onclick="showScreen('home-screen')" class="back-btn">‚Üê Volver</button>
            <h2>Historial de Viajes</h2>
        </div>
        
        <div id="history-list" class="history-list">
            <!-- Se llenar√° din√°micamente -->
        </div>
    </div>

    <!-- Pantalla de Recarga -->
    <div id="recharge-screen" class="screen">
        <div class="screen-header">
            <button onclick="showScreen('home-screen')" class="back-btn">‚Üê Volver</button>
            <h2>Recargar Saldo</h2>
        </div>
        
        <div class="recharge-container">
            <div class="amount-buttons">
                <button class="amount-btn" onclick="selectAmount(5000)">$5,000</button>
                <button class="amount-btn" onclick="selectAmount(10000)">$10,000</button>
                <button class="amount-btn" onclick="selectAmount(20000)">$20,000</button>
                <button class="amount-btn" onclick="selectAmount(50000)">$50,000</button>
            </div>
            
            <div class="custom-amount">
                <label>Monto personalizado:</label>
                <input type="number" id="custom-amount" placeholder="Ingresa el monto">
            </div>
            
            <button class="btn-primary" onclick="rechargeBalance()">
                Recargar Saldo
            </button>
        </div>
    </div>

    <!-- Modal de √âxito/Error -->
    <div id="success-modal" class="modal">
        <div class="modal-content">
            <span class="success-icon" id="modal-icon">‚úÖ</span>
            <h2 id="success-title">Operaci√≥n Exitosa</h2>
            <p id="success-message"></p>
            <button onclick="closeModal()" class="btn-secondary">Aceptar</button>
        </div>
    </div>

    <footer class="main-footer">
  <p>Nombres<strong>Cristian Pulido y Miguel Sotelo</strong> ¬© 2025</p>
  <p>Estudiante UPTC</p>
</footer>
    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>